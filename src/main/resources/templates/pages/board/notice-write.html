<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê³µì§€ì‚¬í•­ ì‘ì„± â€” WorkSpace</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="app-wrap">
  <div th:replace="~{fragments/sidebar :: sidebar}"></div>
  <div class="main-content">
    <header th:replace="~{fragments/header :: topbar(title='ê³µì§€ì‚¬í•­')}"></header>
    <div class="content-body">

      <div class="page-header">
        <div>
          <!-- ì‘ì„±/ìˆ˜ì • ëª¨ë“œ êµ¬ë¶„ -->
          <div class="page-title" th:text="${notice != null} ? 'ê³µì§€ì‚¬í•­ ìˆ˜ì •' : 'ê³µì§€ì‚¬í•­ ì‘ì„±'">ê³µì§€ì‚¬í•­ ì‘ì„±</div>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <form th:action="${notice != null} ? @{/board/notice/edit} : @{/board/notice/write}"
                method="post" enctype="multipart/form-data"
                th:object="${boardDto}">

            <!-- ìˆ˜ì • ì‹œ ID ì „ë‹¬ -->
            <input type="hidden" th:if="${notice != null}" name="boardId" th:value="${notice.boardId}">

            <div class="form-group">
              <label class="form-label">ì œëª© *</label>
              <input type="text" th:field="*{title}" class="form-control"
                     placeholder="ê³µì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            </div>

            <div class="form-row" style="margin-bottom:15px;">
              <div class="form-group" style="margin-bottom:0;">
                <label class="form-label">ê³µì§€ êµ¬ë¶„</label>
                <select th:field="*{type}" class="form-control">
                  <option value="NORMAL">ì¼ë°˜ ê³µì§€</option>
                  <option value="IMPORTANT">ì¤‘ìš” ê³µì§€</option>
                </select>
              </div>
              <div style="display:flex;align-items:flex-end;gap:18px;padding-bottom:2px;">
                <label style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--text-sub);cursor:pointer;">
                  <input type="checkbox" name="isPinned" th:checked="${notice != null and notice.isPinned}" style="accent-color:var(--accent);">
                  ìƒë‹¨ ê³ ì •
                </label>
                <label style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--text-sub);cursor:pointer;">
                  <input type="checkbox" name="isImportant" th:checked="${notice != null and notice.isImportant}" style="accent-color:var(--accent);">
                  ì¤‘ìš” í‘œì‹œ
                </label>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">ë‚´ìš© *</label>
              <textarea th:field="*{content}" class="editor-area"
                        placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." required></textarea>
            </div>

            <div class="form-group">
              <label class="form-label">ì²¨ë¶€íŒŒì¼</label>
              <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                <div class="uz-icon">ğŸ“</div>
                <p>íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
                <small>ìµœëŒ€ 10MB / PDF, DOC, XLS, PNG, JPG</small>
                <input type="file" id="fileInput" name="files" multiple style="display:none;"
                       onchange="showFileNames(this)">
              </div>
              <div id="file-list" style="margin-top:8px;"></div>
            </div>

            <div class="form-actions">
              <a th:href="@{/board/notice}" class="btn btn-outline">ì·¨ì†Œ</a>
              <button type="submit" class="btn btn-primary"
                      th:text="${notice != null} ? 'ìˆ˜ì • ì™„ë£Œ' : 'ê³µì§€ ë“±ë¡'">ê³µì§€ ë“±ë¡</button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>
<script th:src="@{/js/script.js}"></script>
<script>
function showFileNames(input) {
  const list = document.getElementById('file-list');
  list.innerHTML = '';
  Array.from(input.files).forEach(f => {
    const chip = document.createElement('span');
    chip.className = 'file-chip';
    chip.style.marginRight = '8px';
    chip.textContent = 'ğŸ“„ ' + f.name;
    list.appendChild(chip);
  });
}
</script>
</body>
</html>
