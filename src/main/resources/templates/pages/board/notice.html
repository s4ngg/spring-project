<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>κ³µμ§€μ‚¬ν•­ β€” WorkSpace</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="app-wrap">
  <div th:replace="~{fragments/sidebar :: sidebar}"></div>
  <div class="main-content">
    <header th:replace="~{fragments/header :: topbar(title='κ³µμ§€μ‚¬ν•­')}"></header>
    <div class="content-body">

      <div class="page-header">
        <div>
          <div class="page-title">π“Ά κ³µμ§€μ‚¬ν•­</div>
          <div class="page-sub">κ΄€λ¦¬μκ°€ λ“±λ΅ν• κ³µμ§€λ¥Ό ν™•μΈν•μ„Έμ”</div>
        </div>
        <!-- ADMINλ§ μ‘μ„± λ²„νΌ ν‘μ‹ -->
        <a th:if="${session.LOGIN_MEMBER.role == 'ADMIN'}"
           th:href="@{/board/notice/write}" class="btn btn-primary">βοΈ κ³µμ§€ μ‘μ„±</a>
      </div>

      <div class="card">
        <div class="card-body" style="padding:0;">
          <!-- κ²€μƒ‰ ν΄λ°” -->
          <div class="toolbar" style="padding:15px 18px 0;">
            <form th:action="@{/board/notice}" method="get" style="display:flex;gap:9px;flex:1;">
              <div class="search-wrap">
                <span class="si">π”</span>
                <input type="text" name="keyword" th:value="${keyword}" placeholder="μ λ© λλ” λ‚΄μ© κ²€μƒ‰...">
              </div>
              <select name="type" class="filter-select">
                <option value="">μ „μ²΄</option>
                <option value="IMPORTANT" th:selected="${type == 'IMPORTANT'}">μ¤‘μ” κ³µμ§€</option>
                <option value="NORMAL" th:selected="${type == 'NORMAL'}">μΌλ° κ³µμ§€</option>
              </select>
              <button type="submit" class="btn btn-outline btn-sm">κ²€μƒ‰</button>
            </form>
          </div>

          <!-- λ©λ΅ ν…μ΄λΈ” -->
          <table class="data-table">
            <thead>
              <tr>
                <th style="width:60px;">λ²νΈ</th>
                <th>μ λ©</th>
                <th style="width:90px;">μ‘μ„±μ</th>
                <th style="width:105px;">μ‘μ„±μΌ</th>
                <th style="width:65px;">μ΅°νμ</th>
              </tr>
            </thead>
            <tbody>
              <!-- th:each="notice : ${list}" -->
              <tr th:each="notice : ${list}"
                  th:onclick="|location.href='@{/board/notice/detail(id=${notice.boardId})}'|">
                <td class="muted">
                  <span th:if="${notice.isImportant}">π“</span>
                  <span th:unless="${notice.isImportant}" th:text="${notice.boardId}">1</span>
                </td>
                <td class="bold">
                  <span class="pin-label" th:if="${notice.isImportant}">μ¤‘μ”</span>
                  <span th:text="${notice.title}">κ³µμ§€ μ λ©</span>
                </td>
                <td class="muted" th:text="${notice.writerName}">κ΄€λ¦¬μ</td>
                <td class="muted" th:text="${#temporals.format(notice.createdAt, 'yyyy.MM.dd')}">2025.06.20</td>
                <td class="muted" th:text="${notice.viewCount}">0</td>
              </tr>
              <!-- λ©λ΅ μ—†μ„ λ• -->
              <tr th:if="${#lists.isEmpty(list)}">
                <td colspan="5" style="text-align:center;padding:40px;color:var(--text-muted);">λ“±λ΅λ κ³µμ§€κ°€ μ—†μµλ‹λ‹¤.</td>
              </tr>
            </tbody>
          </table>

          <!-- νμ΄μ§€λ„¤μ΄μ… -->
          <div class="pagination">
            <button class="pg-btn"
                    th:onclick="${currentPage <= 1} ? null : |location.href='@{/board/notice(page=${currentPage-1},keyword=${keyword})}'|">β€Ή</button>
            <button class="pg-btn"
                    th:each="i : ${#numbers.sequence(startPage, endPage)}"
                    th:text="${i}"
                    th:classappend="${i == currentPage} ? 'active'"
                    th:onclick="|location.href='@{/board/notice(page=${i},keyword=${keyword})}'|">1</button>
            <button class="pg-btn"
                    th:onclick="${currentPage >= totalPages} ? null : |location.href='@{/board/notice(page=${currentPage+1},keyword=${keyword})}'|">β€Ί</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<script th:src="@{/js/script.js}"></script>
</body>
</html>
