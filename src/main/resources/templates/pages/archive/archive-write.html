<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자료 업로드 — WorkSpace</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="app-wrap">
  <div th:replace="~{fragments/sidebar :: sidebar}"></div>
  <div class="main-content">
    <header th:replace="~{fragments/header :: topbar(title='자료실')}"></header>
    <div class="content-body">

      <div class="page-header">
        <div>
          <div class="page-title" th:text="${archive != null} ? '자료 수정' : '자료 업로드'">자료 업로드</div>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <form th:action="${archive != null} ? @{/board/archive/edit} : @{/board/archive/write}"
                method="post" enctype="multipart/form-data"
                th:object="${boardDto}">

            <input type="hidden" th:if="${archive != null}" name="boardId" th:value="${archive.boardId}">

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">카테고리 *</label>
                <select th:field="*{category}" class="form-control" required>
                  <option value="">카테고리 선택</option>
                  <option value="HR">인사/총무</option>
                  <option value="DEV">개발/기술</option>
                  <option value="PLAN">기획/마케팅</option>
                  <option value="FIN">재무/회계</option>
                  <option value="FORM">사내 양식</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">제목</label>
                <input type="text" th:field="*{title}" class="form-control" placeholder="파일 제목 (선택)">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">파일 설명</label>
              <input type="text" th:field="*{content}" class="form-control"
                     placeholder="파일에 대한 간단한 설명을 입력하세요">
            </div>

            <div class="form-group">
              <label class="form-label">파일 업로드 *</label>
              <div class="upload-zone" style="padding:40px 20px;"
                   onclick="document.getElementById('archiveFile').click()">
                <div class="uz-icon">📁</div>
                <p style="font-weight:600;margin-bottom:4px;">파일을 드래그하거나 클릭하여 업로드</p>
                <input type="file" id="archiveFile" name="file" style="display:none;"
                       onchange="showFileName(this)" required>
                <small>최대 50MB / PDF, DOC, XLS, PPT, ZIP, PNG, JPG 등</small>
              </div>
              <div id="selected-file" style="margin-top:8px;"></div>
            </div>

            <div class="form-actions">
              <a th:href="@{/board/archive}" class="btn btn-outline">취소</a>
              <button type="submit" class="btn btn-primary"
                      th:text="${archive != null} ? '수정 완료' : '업로드'">업로드</button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>
<script th:src="@{/js/script.js}"></script>
<script>
function showFileName(input) {
  const div = document.getElementById('selected-file');
  if (input.files.length > 0) {
    div.innerHTML = '<span class="file-chip">📄 ' + input.files[0].name + '</span>';
  }
}
</script>
</body>
</html>
